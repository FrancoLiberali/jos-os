\documentclass[titlepage,a4paper,12pt]{article}
% Indica el estilo que se va a usar para todo el documento.
% Parámetros:
% a4paper, letterpaper, a5paper, …
% landscape: Apaisado
% titlepage: Hace que el tıtulo y el resumen queden en una página aparte. El resumen se indica con la instrucción \abstract{..}
% 10pt, 11pt, 12pt, … Tamaño de la letra.
% twoside, oneside. Simple o doble faz.
% twocolumn. Texto a dos columnas.
%
% Clases de documentos:
% article: Informes pequeños, trabajos prácticos.
% report: Informes largos, tesis, guiones. Tiene capítulos y apartados.
% book
% slide: Diapositivas

%para que las subsecciones sean con letras
%\renewcommand{\thesubsection}{\thesection.\alph{subsection}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Paquetes
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{listings} % Paquete para importar código fuente.
\usepackage{color} % Paquete para darle color a la sintaxis del codigo fuente.

% Establece los márgenes de la hoja, aunque los margenes por defecto son bastante buenos.
%\usepackage[top=3cm, bottom=3cm, left=2cm, right=2cm]{geometry} 

\usepackage{latexsym} % Este paquete permite usar simbolos especiales, no relacionados con la matemática, como  \Join o \Box
\usepackage{verbatim} % Para escribir codigo fuente.
\usepackage{amsmath} % La gran mayoría de los simbolos matemáticos
\usepackage{amssymb} % Algunos pocos símbolos matemáticos más raros, como \digamma

\usepackage[spanish]{babel} % Definimos el documento como que esta en español.
\usepackage[utf8]{inputenx} % Este paquete permite usar los acentos y eñes directamente en el texto.

\usepackage{graphicx} % Para usar imagenes

%para empezar las secciones en 0
%\setcounter{section}{-1}

% Con esta instrucción definimos el interlineado. Por defecto es 1.
\linespread{1}

% Con esta instrucción obtenemos el número de página en el pie y una cabecera con el nombre de la sección (o con la sección en las páginas pares y la subsección en las impares si hemos indicado la opción twoside en el comando documenclass).
%\pagestyle{headings}

% Pero también está la instrucción \pagestyle{myheadings}, que pone el número de página al pie y en la cabecera pone el texto especiﬁcado por los comandos ``markboth{...}{...}'' y ``markright{...}''.
%\pagestyle{myheadings}
%\markboth{Encabezado izquierdo}{Encabezado derecho} % Para doble faz
%\markright{Encabezado derecho.} % Para una carilla.

% Si no hemos especiﬁcado la opción twoside, todas las páginas se consideran derechas. Podemos cambiar el estilo de la página en curso mediante \thispagestyle. Por ejemplo, si queremos que la página en curso no tenga número escribimos \thispagestyle{empty} en el cuerpo del documeento.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Portada
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% En la instrucción \title{..}, se escribe el título del documento.
\title{ }

%\author{ Franco Liberali 99491} % Aqui se pueden escribir los nombres de varios autores, separados por la instrucción \and.

% Aquí podemos escribir la fecha de realización del trabajo práctico. La fecha actual se escribe con \today. Si no se quiere incluir la fecha, dejar la instrucción en blanco.
\date{}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% AQUI COMENZAMOS EL DOCUMENTO
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

%Lo primero que hacemos es crear el titulo.
\maketitle

%Creamos los indices que sean necesarios.
\tableofcontents %Índice general
%\listoffigures %Indice de imágenes
%\listoftables %Indice de tablas



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% AQUI EMPEZAMOS A ESCRIBIR
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newpage
\newpage

\section{Inicializaciones}

\subsection{env\_alloc}

\begin{enumerate}
\item[1] ¿Qué identificadores se asignan a los primeros 5 procesos creados? (Usar base hexadecimal.)

El código que se sigue para generar estos 5 identificadores es:
\begin{verbatim}
#define ENVGENSHIFT 12  // >= LOGNENV
#define LOG2NENV		10
#define NENV			(1 << LOG2NENV)
e = env_free_list
// Generate an env_id for this environment.
generation = (e->env_id + (1 << ENVGENSHIFT)) & ~(NENV - 1);
if (generation <= 0)  // Don't create a negative env_id.
    generation = 1 << ENVGENSHIFT;
e->env_id = generation | (e - envs);
env_free_list = e->env_link;
\end{verbatim}

donde e$->$env\_id = 0 ya que estos envs no fueron allocados nunca aún.

\texttt{1 $<<$ ENVGENSHIFT} = \texttt{1 $<<$ 12} = \texttt{0x1000}

\texttt{~(NENV - 1)} = \texttt{~(1 $<<$ LOG2NENV - 1)} = \texttt{~(1 $<<$ 10 - 1)} = \texttt{~(0x400 - 1)}
= \texttt{~(0x3FF)} = \texttt{0xFFFFFC00}

\texttt{(0 + 1 $<<$ ENVGENSHIFT) \& ~(NENV - 1)} = \texttt{0x1000 \& 0xFFFFFC00} = \texttt{0x1000}

\texttt{generation = 0x1000}

Con i = 0...4

\texttt{e$->$env\_id$_{i}$ = generation | (e - envs) = 0x1000 | i}
 
e$->$env\_id$_{0}$ = 0x1000 $\mid$ 0 = 0x1000

e$->$env\_id$_{1}$ = 0x1000 $\mid$ 1 = 0x1001

e$->$env\_id$_{2}$ = 0x1000 $\mid$ 2 = 0x1002

e$->$env\_id$_{3}$ = 0x1000 $\mid$ 3 = 0x1003

e$->$env\_id$_{4}$ = 0x1000 $\mid$ 4 = 0x1004

\item[2] Supongamos que al arrancar el kernel se lanzan NENV procesos a ejecución. A continuación se destruye el proceso asociado a envs[630] y se lanza un proceso que cada segundo muere y se vuelve a lanzar. ¿Qué identificadores tendrá este proceso en sus sus primeras cinco ejecuciones?

Para empezar, el e$->$env\_id$_{630}$ = 0x1000 $\mid$ 0x276 = 0x1276 la primera vez que se lanza.


generation$_{630}$ = (0x1276 + 0x1000) \& 0xFFFFFC00 = 0x2276 & 0xFFFFFC00 = 0x2000

e$->$env\_id$_{i}$ = 0x2000 $\mid$ 0x276 = 0x2276

generation$_{630}$ = (0x1276 + 0x1000) \& 0xFFFFFC00 = 0x2276 & 0xFFFFFC00 = 0x2000

e$->$env\_id$_{i}$ = 0x2000 $\mid$ 0x276 = 0x2276


\end{enumerate}



\end{document}\grid